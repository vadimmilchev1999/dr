/* Base */
:root{
  --violet-1:#0b0720;
  --violet-2:#160c3a;
  --violet-3:#2a155e;
  --accent:#c77dff;
  --text:#fff;
  --shadow:0 10px 40px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--text);
  background: radial-gradient(900px 600px at 20% 10%, var(--violet-3) 0%, transparent 60%),
              linear-gradient(180deg, var(--violet-1), var(--violet-2));
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans';
  overflow:hidden;
}

/* Orientation gate */
.gate{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background: radial-gradient(1200px 800px at 50% 0%, rgba(199,125,255,.2), transparent 60%),
              linear-gradient(180deg, var(--violet-1), var(--violet-2));
  z-index:1000;
}
.gate.hidden{ display:none }
.gate .card{
  width:min(90vw,520px); text-align:center; padding:28px 24px; border-radius:16px;
  background: rgba(255,255,255,.06); backdrop-filter: blur(8px); box-shadow: var(--shadow);
}
.gate .phone{
  margin:0 auto 16px; width:56px; height:92px; border-radius:14px; border:3px solid #fff2; position:relative;
}
.gate .phone::before{
  content:""; position:absolute; inset:8px; border-radius:10px; background: linear-gradient(180deg,#2a155e,#0b0720);
}
.gate h2{margin:8px 0 6px; font-weight:800}
.gate p{margin:0 0 14px; opacity:.85}
.gate button{
  border:0; border-radius:12px; padding:12px 16px; background:#ffffff14; color:#fff; font-weight:700;
  cursor:pointer;
}

/* Music icon */
#musicToggle{
  position:fixed; top:10px; right:12px; z-index:900;
  border:0; outline:none; border-radius:999px;
  width:44px; height:44px; display:grid; place-items:center;
  background:#ffffff14; color:#fff; cursor:pointer; box-shadow: var(--shadow);
}
#musicToggle .icon{font-size:18px;}

/* Countdown */
#countdown{ position:fixed; inset:0; display:grid; place-items:center; z-index:800; }
#countdown .num{ font-size: clamp(48px, 14vw, 120px); font-weight:800; color:#fff; text-shadow:0 8px 24px rgba(0,0,0,.5); }
#countdown .dot{ position:absolute; width:10px; height:10px; border-radius:50%; background:#fff8; top:20%; left:50%; transform:translateX(-50%); animation:fall 3s linear forwards; }
@keyframes fall{ to{ top:80%; opacity:0 } }

/* Matrix canvas */
#matrix{ position:fixed; inset:0; z-index:100; pointer-events:none; }

/* Phrase */
#phrase{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:200;
  filter: drop-shadow(0 12px 24px rgba(0,0,0,.45));
  pointer-events:none;
}
#phrase .letter{
  font-family:'Pacifico', cursive;
  font-size: clamp(36px, 8vw, 92px);
  color: var(--accent);
  display:inline-block;
  opacity:0;
  transform-origin:50% 70%;
  animation:pop .65s cubic-bezier(.2,.8,.2,1) forwards;
  animation-delay: calc(var(--i) * 90ms);
  text-shadow: 0 1px 0 rgba(255,255,255,.15);
}
#phrase .space{ width:.5em }

@keyframes pop{
  0%{ opacity:0; transform: translateY(28px) scale(.8) rotate(-8deg); }
  60%{ opacity:1; transform: translateY(-6px) scale(1.08) rotate(0deg); }
  100%{ opacity:1; transform: translateY(0) scale(1) rotate(0deg); }
}

/* Heart (safe CSS) */
#heart{
  position:fixed; inset:0; display:grid; place-items:center; z-index:220; pointer-events:none;
  opacity:0;
}
#heart .h{
  width:min(36vmin,320px); aspect-ratio:1/1; position:relative;
  transform: rotate(-45deg) scale(0.001);
  background: radial-gradient(circle at 30% 30%, #ff8fa3, #ff4d6d 70%);
  border-radius: 20% 0 0 20%;
}
#heart .h::before, #heart .h::after{
  content:""; position:absolute; width:100%; height:100%; background: inherit; border-radius:50%;
}
#heart .h::before{ top:-50%; left:0; }
#heart .h::after{ left:50%; top:0; }
#heart.show{ animation: heartFade 1.3s ease forwards; opacity:1; }
#heart.show .h{ animation: heartPulse 1.2s ease forwards; }
@keyframes heartPulse{
  0%{ transform: rotate(-45deg) scale(0.001); }
  50%{ transform: rotate(-45deg) scale(1.05); }
  100%{ transform: rotate(-45deg) scale(1.6); }
}
@keyframes heartFade{
  0%{ opacity:0 }
  40%{ opacity:1 }
  80%{ opacity:1 }
  100%{ opacity:0 }
}

/* Starfield */
#starfield{ position:fixed; inset:0; z-index:50; background:radial-gradient(1200px 800px at 50% 50%, #1a1033, #050511 60%); }

/* Book */
#book{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:60;
}
.book{ width:min(92vw, 900px); height:min(70vh, 560px); perspective: 2000px; display:flex; gap:2px; }
.page{
  position:relative; width:50%; height:100%;
  background:linear-gradient(180deg, #0f0a1f, #1a1033);
  color:#fff; border-radius:12px; overflow:hidden;
  transform-origin: left center; transform-style: preserve-3d;
  transition: transform 0.8s ease, box-shadow .3s ease;
  box-shadow: 0 6px 24px rgba(0,0,0,.45);
}
.page .inner{ position:absolute; inset:0; padding:22px; display:flex; flex-direction:column; gap:14px; }
.page img{ width:100%; height:60%; object-fit:cover; border-radius:10px; }
.page h3{ margin:0; font-size:clamp(18px, 2.4vw, 28px) }
.page p{ margin:0; opacity:.9; font-size:clamp(14px, 1.8vw, 18px) }
.page.flipped{ transform: rotateY(-180deg); }
.page::after{
  content:""; position:absolute; inset:0; background: linear-gradient(90deg, rgba(255,255,255,.06), transparent 30%, transparent 70%, rgba(0,0,0,.3));
  pointer-events:none;
}

/* Confetti */
#confetti{ position:fixed; inset:0; pointer-events:none; z-index:500; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #phrase .letter{ animation:none; opacity:1 }
  #heart.show .h{ animation:none; transform: rotate(-45deg) scale(1) }
}
